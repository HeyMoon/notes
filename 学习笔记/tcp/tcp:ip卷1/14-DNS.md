域名系统(DNS)是一种用于TCP/IP应用程序的分布式数据库，它提供主机名字和IP地址之间的转换及有关电子邮件的选路信息。

### 指针查询
DNS中一直难以理解的部分就是指针查询方式（PTR），即给定一个IP地址，返回与该地址对应的域名。

### 用UDP还是TCP
DNS名字服务器使用的熟知端口号无论对UDP还是TCP都是53.这意味着DNS均支持UDP和TCP。那么这两种协议都在什么情况下采用以及采用的理由是什么呢？

当名字解析器发出一个查询请求，并且返回响应中的 T C(删减标志)比特被设置为 1 时， 它就意味着响应的长度超过了 5 1 2 个字节，而仅返回前 5 1 2 个 字 节 。 在 遇 到 这 种 情 况 时 ， 名 字 解 析 器 通 常 使 用 T C P 重 发 原 来 的 查 询 请 求 ， 它 将 允 许 返 回 的 响 应 超 过 5 1 2 个 字 节 ( 回 想 在 11 . 1 0 节讨论的 U D P 数 据 报 的 最 大 长 度 )。既然 T C P 能 将 用 户 的 数 据 流 分 为 一 些 报 文 段 ， 它 就 能 用 多 个报文段来传送任意长度的用户数据。

此外，当一个域的辅助名字服务器在启动时，将从该域的主名字服务器执行区域传送。 我们也说过辅助服务器将定时(通常是 3小时)向主服务器进行查询以便了解主服务器数据是 否发生变动。如果有变动，将执行一次区域传送。区域传送将使用 T C P ， 因 为 这 里 传 送 的 数 据远比一个查询或响应多得多。

既然 D N S 主要使用 U D P ， 无 论 是 名 字 解 析 器 还 是 名 字 服 务 器 都 必 须 自 己 处 理 超 时 和 重 传 。 此 外 ， 不 像 其 他 的 使 用 U D P 的 I n t e r n e t 应用( T F T P 、 B O O T P 和 S N M P )， 大 部 分 操 作 集 中 在 局 域网上， D N S 查 询 和 响 应 通 常 经 过 广 域 网 。 分 组 丢 失 率 和 往 返 时 间 的 不 确 定 性 在 广 域 网 上 比 局域网上更大。这样对于 D N S 客户程序，一个好的重传和超时程序就显得更重要了。
