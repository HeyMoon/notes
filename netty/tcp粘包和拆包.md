TCP是个流协议,所谓流,就是没有界限的一串数据.一个完整的包可能会被TCP拆分成多个包进行发送,也有可能把
多个小的包封装成一个大的数据包发送,这就是所谓的TCP粘包和拆包问题.


## TCP粘包和拆包发生的原因
问题产生的原因有三个,分别如下.
+ 应用程序write写入的字节大小大于套接口发送缓冲区大小
+ 进行MSS大小的TCP分段
+ 以太网帧的payload大于MTU进行IP分片

MTU是网络传输最大报文，MSS是网络传输数据最大值。MSS加包头数据就等于MTU。

## 粘包问题的解决策略
由于底层的TCP无法理解上层的业务数据,所以底层是无法保证数据包不被拆分和重组的,这个问题只能
通过上层的应用协议栈设计来解决,根据业界主流的协议的解决方案,可以归纳如下:
+ 消息定长,例如每个报文的大小为固定长度200字节,如果不够,空位补空格;
+ 在包尾增加回车换行符进行分割,例如ftp协议;
+ 将消息分为消息头和消息体,消息头包含表示消息总长度的字段,通常设计思路为消息头的第一个字段使用int32来
表示消息的总长度;
