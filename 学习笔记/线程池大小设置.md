一个线程池的理想的大小取决于你提交的任务的类型以及你部署的系统的特性。线程池大小几乎不能硬编码；相反，线程池的大小通过`Runtime.availableProcessors`动态的计算。

为线程池指定大小不是一个精确的科学，但是幸运的是你只需要避免太大和太小两个极端。如果线程池太大，那么线程竞争稀缺的CPU和内存资源，导致更高的内存使用，并且可能导致资源耗尽。如果太小，尽管有可用的work,处理器却没有使用，导致吞吐量不大。

为了合理的指定一个线程池的大小，你需要理解计算的环境，资源预算，以及任务的本质。部署系统上有多少个处理器？有多少内存？任务主要是计算，还是I/O，还是两者都有？他们是否需要稀缺的资源，比如JDBC 连接?如果你有不同行为的任务，考虑使用多个线程池，这样每个都可以根据他们的工作量调节。

对于计算密集的任务，一个有N个CPU的系统通常利用`N + 1`个线程来获得最优利用率（即使是计算密集的线程偶尔也会因为page fault或其他原因而暂停，所以一个额外的线程防止这种情况发生时，CPU周期没有使用）。对于包括I/O或其他阻塞操作的任务，你需要更大的线程池，因为不是所有的线程在所有时间都是可以调度的。为了合理的指定池子的大小，你必须估计你的任务的等待时间和计算时间的比例。这个估计不需要很准确，可以通过测量设备获得。此外，the size of the thread pool can be tuned by running the application using several different pool sizes under a benchmark load and observing the level of CPU utilization.


线程池的保护策略：

1. 框架层面的RejectedExecutionHandler

2. 业务层面的限流
